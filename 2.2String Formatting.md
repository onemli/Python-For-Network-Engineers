## 2.4 String Formatting

 

When working with strings, there are often situations where different data needs to be substituted in string template. This can be done by combining string parts and data, but Python has a more convenient way - strings formatting.

 

String formatting can help, for example, in such situations:

- need to set values to a string by a certain template
- need to format output by columns
- need to convert numbers to binary format



There are several options for string formatting:

- with operator `%` — older option
- method format — relatively new option
- `f-string` — new option that appeared in Python 3.6
- Although format is recommended, string formatting can often be found through `%`.

 

### format() Method

Example of format method use:

```python
intf = "interface FastEthernet0/{}".format('1')

print(intf)
```

> **Output:**

> ```python
> interface FastEthernet0/1
> ```
>

 

A special symbol `{}` indicates that the value that is passed to format method is placed here. Each pair of curly braces represents one place for the substitution.

 

Values that are placed in curly braces may be of different types. For example, it can be a string, number or list:

```python
print('{}'.format('10.1.1.1'))
print('{}'.format(100))
print('{}'.format([10, 1, 1,1]))
```

> **Output:**

> ```python
> 10.1.1.1
> 100
> [10, 1, 1, 1]
> ```
>

 

You can align result in columns by formatting strings. In string formatting, you can specify how many characters are selected for the data. If number of characters in the data is less than number of characters selected, the missing characters are filled with blanks.

 

For example, you can align data in columns of equal width of 15 characters with right side alignment:

```python
vlan, mac, intf = ['100', 'aabb.cc80.7000', 'Gi0/1']
print("{:>15} {:>15} {:>15}".format(vlan, mac, intf))
```

> **Output:**

> ```python
>       100 aabb.cc80.7000      Gi0/1
> ```
>

 

Alignment to the left:

```python
print("{:15} {:15} {:15}".format(vlan, mac, intf))
```

> **Output:**

> ```python
> 100       aabb.cc80.7000 Gi0/1
> ```
>

 

Output template can also be multi-string:

```python
ip_template = '''
IP address:
{}'''
print(ip_template.format('10.1.1.1'))
```

> **Output:**

> ```python
> 
> IP address:
> 10.1.1.1
> ```
>

 

You can also use string formatting to change the display format of numbers.

 

For example, you can specify how many digits after the comma to show:

```python
print("{:.3f}".format(10.0/3))
```



> **Output:**

> ```python
> 3.333
> ```
>

 

Using string formatting, you can convert numbers to binary format:

```python
print('{:b} {:b} {:b} {:b}'.format(192, 100, 1, 1))
```

> **Output:**

> ```python
> 11000000 1100100 1 1
> ```
>

 

You can still specify additional parameters such as column width:

```python
print('{:8b} {:8b} {:8b} {:8b}'.format(192, 100, 1, 1))
```

> **Output:**

> ```python
> 11000000 1100100    1    1
> ```
>

 

You can also specify that numbers should be supplemented with zeros instead of spaces:

```python
print('{:08b} {:08b} {:08b} {:08b}'.format(192, 100, 1, 1))
```

> **Output:**

> ```python
> 11000000 01100100 00000001 00000001
> ```
>

 

 

You can enter names in curly braces. This makes it possible to pass arguments in any order and also makes template more understandable:

```python
print('{ip}/{mask}'.format(mask=24, ip='10.1.1.1'))
```

> **Output:**

> ```python
> 10.1.1.1\24
> ```
>

 

Another useful feature of string formatting is argument number specification:

```python
print('{1}/{0}'.format(24, '10.1.1.1'))
```

> **Output:**

> ```python
> 10.1.1.1/24
> ```
>

 

For example this can prevent repetitive transmission of the same values:

```python
ip_template = '''
IP address:
{:<8} {:<8} {:<8} {:<8}
{:08b} {:08b} {:08b} {:08b}
'''
print(ip_template.format(192, 100, 1, 1, 192, 100, 1, 1))
```

> **Output:**

> ```python
> 
> 192   100   1    1    
> 11000000 01100100 00000001 00000001
> ```
>

 

In example above the octet address has to be passed twice - one for decimal format and other for binary.

 

By specifying value indexes that are passed to `format()` method, it is possible to avoid duplication:

```python
ip_template = '''
IP address:
{0:<8} {1:<8} {2:<8} {3:<8}
{0:08b} {1:08b} {2:08b} {3:08b}
'''
print(ip_template.format(192, 100, 1, 1, 192, 100, 1, 1))
```

> **Output:**

> ```python
>  
> IP address:
> 192   100   1    1
> 11000000 01100100 00000001 00000001
> 
> ```
>

 

 

### f-strings

 

Python 3.6 added a new version of string formatting - f-strings or interpolation of strings. The f-strings allow not only to set values to template, but also to perform calls to functions, methods, etc.

In many situations `f-strings` are easier to use than format, and f-strings work faster than format and other methods of string formatting.

 

`F-string` is a literal line with a letter f in front of it. Inside f-string, in curly braces there are names of variables that will be substituted:

```python
ip = '10.1.1.1'
mask = 24

print(f"IP: {ip}, mask: {mask}")
```

> **Output:**

> ```python
> IP: 10.1.1.1, mask: 24
> ```
>

 

The same result with format method you can achieve by: `"IP: {ip}, mask: {mask}".format(ip=ip, mask=mask)`.

 

A very important difference between f-strings and format: f-strings are expressions that are processed, not just strings. In addition to substituting variable values you can write expressions in curly braces:

```python
first_name = 'William'
second_name = 'Shakespeare'

print(f"{first_name.upper()} {second_name.upper()}")
```

> **Output:**

> ```python
> WILLIAM SHAKESPEARE
> ```
>



After colon in `f-strings` you can specify the same values as in format:

```python
oct1, oct2, oct3, oct4 = [10, 1, 1, 1]

print(f'''
IP address:
{oct1:<8} {oct2:<8} {oct3:<8} {oct4:<8}
{oct1:08b} {oct2:08b} {oct3:08b} {oct4:08b}''')
```

> **Output:**

> ```python
> IP address:
> 10    1    1    1   
> 00001010 00000001 00000001 00000001
> ```
>

 